<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phaser - Making your first game, part 8</title>
    <script type="text/javascript" src="libs/ace/ace.js" charset="utf-8"></script>
    <script type="text/javascript" src="libs/phaser.min.js" charset="utf-8"></script>
    <style type="text/css">
        body {
            margin: 0;
        }

        #editor {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 20%;
            left: 50%;
            border-bottom: solid #282A2E 5px;
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
        }

        #game {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }

    </style>
</head>

<body style="overflow: hidden;">

<div id="game"></div>

<div id="editor">
    function foo(items) {
        var x = "All this is syntax highlighted";
        return x;
    }
</div>

<script type="text/javascript">

    var editor = ace.edit("editor");

    editor.setTheme("ace/theme/tomorrow_night");
    editor.getSession().setMode("ace/mode/javascript");

    var starCraft;
    var cursors;
    var game = new Phaser.Game(window.innerWidth, window.innerWidth, Phaser.CANVAS, 'game', {
        init: init,
        preload: preload,
        create: create,
        update: update,
        render: render
    });

    function init()
    {
        game.scale.scaleMode = Phaser.ScaleManager.RESIZE;
    }

    function preload()
    {
        game.load.image('starField', 'assets/starField.png');
        game.load.image('starCraft', 'assets/spaceCraft.png');
    }

    function create()
    {
        game.add.tileSprite(0, 0, 1920, 1920, 'starField');
        game.world.setBounds(0, 0, 1920, 1920);

        game.scale.pageAlignVertically = true;
        game.scale.pageAlignHorizontally = true;

        game.physics.startSystem(Phaser.Physics.P2JS);

        starCraft = game.add.sprite(game.world.centerX, game.world.centerY, 'starCraft');
//        starCraft.scale.setTo(0.5, 0.5);

        game.physics.p2.enable(starCraft);

        game.camera.follow(starCraft);
        game.camera.deadzone = new Phaser.Rectangle(100, 100, 500, 500);

        cursors = game.input.keyboard.createCursorKeys();
    }

    function update()
    {
        if (cursors.left.isDown)
        {
            starCraft.body.rotateLeft(1);
        }
        else if (cursors.right.isDown)
        {
            starCraft.body.rotateRight(1);
        }
        else
        {
            starCraft.body.setZeroRotation();
        }

        if (cursors.up.isDown)
        {
            starCraft.body.thrust(10);
        }
        else if (cursors.down.isDown)
        {
            starCraft.body.reverse(10);
        }
    }

    function render()
    {
        var zone = game.camera.deadzone;

        game.context.fillStyle = 'rgba(255,255,255,0.1)';
        game.context.fillRect(zone.x, zone.y, zone.width, zone.height);

        game.debug.cameraInfo(game.camera, 32, 32);
        game.debug.spriteCoords(starCraft, 32, 500);
    }

</script>

</body>

</html>
